<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>WhatsApp Valentine üíö</title>
<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #0b141a;
  color: #111;
}

.chat {
  max-width: 420px;
  margin: auto;
  background: #e5ddd5;
  min-height: 100vh;
  padding: 10px;
  box-sizing: border-box;
}

.header {
  background: #075e54;
  color: white;
  padding: 12px;
  font-size: 18px;
  font-weight: bold;
  position: sticky;
  top: 0;
}

.bubble {
  max-width: 80%;
  padding: 10px 14px;
  margin: 8px 0;
  border-radius: 10px;
  line-height: 1.4;
  animation: fadeIn 0.3s ease;
}

.from-me {
  background: #dcf8c6;
  margin-left: auto;
  border-bottom-right-radius: 2px;
}

.from-them {
  background: white;
  margin-right: auto;
  border-bottom-left-radius: 2px;
}

.options {
  margin-top: 10px;
}

.option {
  display: block;
  width: 100%;
  background: #25d366;
  border: none;
  color: white;
  padding: 12px;
  margin: 6px 0;
  border-radius: 8px;
  font-size: 16px;
  cursor: pointer;
  transition: 0.2s;
}

.option:hover {
  transform: scale(1.02);
}

#yesBtn {
  font-size: 18px;
}

#noBtn {
  font-size: 16px;
}

canvas {
  position: fixed;
  top: 0; left: 0;
  pointer-events: none;
}

.heart {
  position: fixed;
  bottom: -20px;
  font-size: 22px;
  animation: floatUp 5s linear infinite;
}

@keyframes floatUp {
  to { transform: translateY(-110vh); opacity: 0; }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Custom Alert */
#customAlert {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 999;
}

.alert-box {
  background: white;
  padding: 20px;
  border-radius: 12px;
  text-align: center;
}

.alert-box button {
  margin-top: 12px;
  background: #25d366;
  color: white;
  border: none;
  padding: 10px 16px;
  border-radius: 8px;
  font-size: 16px;
}
</style>
</head>

<body>

<audio autoplay loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_9f45c9b1d2.mp3?filename=romantic-ambient-112191.mp3" type="audio/mpeg">
</audio>

<canvas id="confetti"></canvas>

<div class="chat">
  <div class="header">üíö My Valentine</div>
  <div id="messages"></div>
  <div class="options" id="options"></div>
</div>

<!-- Custom Alert -->
<div id="customAlert">
  <div class="alert-box">
    <div id="alertText"></div>
    <button onclick="closeAlert()">OK üíñ</button>
  </div>
</div>

<script>
const questions = [
  { q:"Where did we hold hands first? ü§ù‚ù§Ô∏è",
    options:["Goregaon","Malad","Dombivli","Seawoods"], correct:2 },
  { q:"What was I wearing when I came to your home first time? üè†‚ù§Ô∏è",
    options:["Grey shirt","White shirt","Blue shirt","Black shirt"], correct:1 },
  { q:"When did we kiss first? üíã‚ù§Ô∏è",
    options:["26 July 2025","24 June 2025","24 July 2025","11 April 2025"], correct:2 }
];

let current = 0;

const msgEl = document.getElementById("messages");
const optEl = document.getElementById("options");

/* Alerts */
function showAlert(msg){
  document.getElementById("alertText").innerText = msg;
  document.getElementById("customAlert").style.display="flex";
}
function closeAlert(){
  document.getElementById("customAlert").style.display="none";
}

/* Add message bubble */
function addBubble(text, fromMe=false){
  const div = document.createElement("div");
  div.className = "bubble " + (fromMe ? "from-me":"from-them");
  div.innerText = text;
  msgEl.appendChild(div);
  msgEl.scrollTop = msgEl.scrollHeight;
}

/* Load Question */
function loadQuestion(){
  const q = questions[current];
  addBubble(q.q, false);
  optEl.innerHTML = "";
  q.options.forEach((opt,i)=>{
    const btn=document.createElement("button");
    btn.className="option";
    btn.innerText=opt;
    btn.onclick=()=>checkAnswer(i,opt);
    optEl.appendChild(btn);
  });
}

function checkAnswer(i,text){
  addBubble(text, true);
  if(i===questions[current].correct){
    burstConfetti();
    current++;
    optEl.innerHTML="";
    setTimeout(()=>{
      if(current<questions.length) loadQuestion();
      else startValentineTrap();
    },500);
  } else {
    showAlert("Oops üòú Try again jaan ‚ù§Ô∏è");
  }
}

/* Valentine Trap */
function startValentineTrap(){
  addBubble("Will you be my Valentine? ü•π‚ù§Ô∏è", false);
  optEl.innerHTML=`
    <button class="option" id="yesBtn">YES üòç</button>
    <button class="option" id="noBtn">NO üôà</button>
  `;

  let yesSize=18, noSize=16;
  const yesBtn=document.getElementById("yesBtn");
  const noBtn=document.getElementById("noBtn");

  noBtn.onclick=()=>{
    showAlert("Are you sure? üòèüíî Think again baby üòò");
    yesSize+=22;
    noSize-=4;
    yesBtn.style.fontSize=yesSize+"px";
    noBtn.style.fontSize=Math.max(noSize,8)+"px";
  };

  yesBtn.onclick=()=>{
    addBubble("YES üòç", true);
    showWinScreen();
  };
}

/* Win */
function showWinScreen(){
  addBubble("YAYYYY!!! üéâüíñ You are officially my Valentine üòòüíç", false);
  addBubble("I LOVE YOU ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è", false);
  startConfettiRain();
  startHearts();
}

/* Confetti */
const canvas=document.getElementById("confetti");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth; canvas.height=innerHeight;
let confetti=[];

function burstConfetti(){
  for(let i=0;i<60;i++){
    confetti.push({x:canvas.width/2,y:canvas.height/2,
      dx:(Math.random()-0.5)*10,dy:(Math.random()-0.5)*10,
      r:4,life:50});
  }
  requestAnimationFrame(drawBurst);
}
function drawBurst(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  confetti=confetti.filter(c=>c.life-- >0);
  confetti.forEach(c=>{
    ctx.beginPath();
    ctx.arc(c.x,c.y,c.r,0,Math.PI*2);
    ctx.fillStyle="pink";
    ctx.fill();
    c.x+=c.dx; c.y+=c.dy; c.dy+=0.3;
  });
  if(confetti.length) requestAnimationFrame(drawBurst);
}
function startConfettiRain(){
  for(let i=0;i<200;i++){
    confetti.push({x:Math.random()*canvas.width,
      y:-Math.random()*canvas.height,dx:0,dy:4,r:4,life:9999});
  }
  requestAnimationFrame(drawRain);
}
function drawRain(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  confetti.forEach(c=>{
    ctx.beginPath();
    ctx.arc(c.x,c.y,c.r,0,Math.PI*2);
    ctx.fillStyle="pink";
    ctx.fill();
    c.y+=c.dy;
    if(c.y>canvas.height) c.y=-10;
  });
  requestAnimationFrame(drawRain);
}

/* Hearts */
function startHearts(){
  setInterval(()=>{
    const h=document.createElement("div");
    h.className="heart";
    h.innerText="‚ù§Ô∏è";
    h.style.left=Math.random()*100+"vw";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),6000);
  },250);
}

loadQuestion();
</script>

</body>
</html>
